var __reflect=this&&this.__reflect||function(e,t,o){e.__class__=t,o?o.push(t):o=[t],e.__types__=e.__types__?o.concat(e.__types__):o},mouse;!function(e){var t=function(){function e(){}return e.MOUSE_MOVE="mouseMove",e.MOUSE_OVER="mouseOver",e.MOUSE_OUT="mouseOut",e.ROLL_OVER="rollOver",e.ROLL_OUT="rollOut",e.MOUSE_WHEEL="mouseWheel",e}();e.MouseEvent=t,__reflect(t.prototype,"mouse.MouseEvent")}(mouse||(mouse={})),egret.DisplayObject.prototype.$getConcatenatedVisible=function(){if(this.$parent){var e=this.$parent.$getConcatenatedVisible();return e&&this.$visible}return this.$visible};var mouse;!function(e){var t,o,n,s,u;e.checkSpeedFrame=1;var r=0,c=function(s,u,r,c){if(s!=e.MouseEvent.ROLL_OVER||!t.isRollOver){if(s==e.MouseEvent.ROLL_OVER?t.isRollOver=!0:s==e.MouseEvent.ROLL_OUT&&delete t.isRollOver,n&&t.buttonModeForMouse)try{var i=o.$displayList.renderBuffer.surface;s==e.MouseEvent.ROLL_OVER?i.style.cursor="pointer":s==e.MouseEvent.ROLL_OUT&&(i.style.cursor="auto")}catch(l){}egret.TouchEvent.dispatchTouchEvent(t,s,u,!1,r,c,null)}};e.enable=function(a){n="Windows PC"==egret.Capabilities.os||"Mac OS"==egret.Capabilities.os,o=a,n&&l();var E=function(o,n){t&&!t.$stage&&(c(e.MouseEvent.MOUSE_OUT,!0,o,n),c(e.MouseEvent.ROLL_OUT,!1,o,n),t=null);var r;s?(r=u,s=!1,u=null):r=a.$hitTest(o,n),null!=r&&r!=a?t?r!=t&&(c(e.MouseEvent.MOUSE_OUT,!0,o,n),c(e.MouseEvent.ROLL_OUT,!1,o,n),t=r,c(e.MouseEvent.ROLL_OVER,!1,o,n),c(e.MouseEvent.MOUSE_OVER,!0,o,n)):(t=r,c(e.MouseEvent.ROLL_OVER,!1,o,n),c(e.MouseEvent.MOUSE_OVER,!0,o,n)):t&&(c(e.MouseEvent.MOUSE_OUT,!0,o,n),c(e.MouseEvent.ROLL_OUT,!1,o,n),t=null)},v=0/0,O=0/0,h=egret.sys.TouchHandler.prototype.onTouchMove;egret.sys.TouchHandler.prototype.onTouchMove=function(t,n,r,c){if(v=t,O=n,h.call(this,t,n,r,c),i){var l=o.$hitTest(t,n);s=!0,u=l,l||(l=o),egret.TouchEvent.dispatchTouchEvent(l,e.MouseEvent.MOUSE_MOVE,!0,!0,t,n,r,!0,c)}};var M=egret.sys.TouchHandler.prototype.onTouchBegin;egret.sys.TouchHandler.prototype.onTouchBegin=function(e,t,o,n){M.call(this,e,t,o,n)};var _=!1,d=egret.web.WebTouchHandler.prototype.getLocation;egret.web.WebTouchHandler.prototype.getLocation=function(e){return 0==e.buttons&&(_=!0),d.call(this,e)};var p=egret.sys.TouchHandler.prototype.onTouchEnd;egret.sys.TouchHandler.prototype.onTouchEnd=function(t,n,r,c){if(_){if(_=!1,v=t,O=n,p.call(this,t,n,r,c),i){var l=o.$hitTest(t,n);s=!0,u=l,l||(l=o),egret.TouchEvent.dispatchTouchEvent(l,e.MouseEvent.MOUSE_MOVE,!0,!0,t,n,r,!0,c)}}else p.call(this,t,n,r,c)},a.addEventListener(egret.Event.ENTER_FRAME,function(){r++,r%e.checkSpeedFrame===0&&(r=0,0/0!=v&&0/0!=O&&E(v,O))},null)},e.setCheckSpeedFrame=function(t){!t||1>t||(console.log("mouse setCheckSpeedFrame="+t),e.checkSpeedFrame=t)},e.setButtonMode=function(e,t){e.buttonModeForMouse=t};var i=!1;e.setMouseMoveEnabled=function(e){i=e};var l=function(){var t="mousewheel",n=function(t){var n=t.type;("DOMMouseScroll"==n||"mousewheel"==n)&&(t.delta=t.wheelDelta?t.wheelDelta:-(t.detail||0),o.dispatchEventWith(e.MouseEvent.MOUSE_WHEEL,!1,t.delta))};window.addEventListener?("mousewheel"===t&&void 0!==document.mozFullScreen&&(t="DOMMouseScroll"),window.addEventListener(t,function(e){n(e)},!1)):window.attachEvent&&window.attachEvent("on"+t,function(e){e=e||window.event,n(e)})}}(mouse||(mouse={}));